<!doctype html>
<html lang="zh-CN" class="settings">

<head>
    <meta charset="utf-8">
    <title>冷站能效检测系统P2</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="bower_components/seiyria-bootstrap-slider/dist/css/bootstrap-slider.css" />
    <link rel="stylesheet" href="bower_components/bootstrap-switch/dist/css/bootstrap3/bootstrap-switch.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
    <!-- build:js scripts/vendor/modernizr.js -->
    <script src="bower_components/modernizr/modernizr.js"></script>
    <!-- endbuild -->
</head>

<body>
    <header>
        <div class="container">
            <nav class="navbar navbar-default navbar-p">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#"><img src="images/logo03.png" alt=""></a>
                </div>
                <div class="navbar-text system-name">冷站能效监测系统</div>
                <div class="navbar-text pull-right project-name">
                    项目名称：<span class="random-text">富豪宾馆</span>
                </div>
            </nav>
        </div>
    </header>
    <section class="device-info">
        <div class="container">
            <div class="row">
                <div class="col-main">
                    <h1 class="title">1号冷机</h1>
                    <div class="row">
                        <div class="col-left">
                            <p class="top">设计COP</p>
                            <p class="bottom">实际COP</p>
                        </div>
                        <div class="col-right">
                            <div class="progress-cop2">
                                <div class="point-1"></div>
                                <div class="point-2"></div>
                                <div class="point-3"></div>
                            </div>
                            <div class="row other-info">
                                <div class="col-xs-4">
                                    <p>冷冻水出水温度：<span id="data-1" class="random-int">XXX XX</span></p>
                                </div>
                                <div class="col-xs-4">
                                    <p>冷却水进水温度：<span id="data-2" class="random-int">XXXXXX</span></p>
                                </div>
                                <div class="col-xs-4">
                                    <p>冷机负载率：<span id="data-3" class="random-int">35</span>%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mb20 mt20">
                        <div class="col-table">
                            <div class="table-wrap">
                                <table class="table table-bordered">
                                    <tbody>
                                        <tr>
                                            <th rowspan="3" style="width: 30%">蒸发器</th>
                                            <td style="width: 45%">冷冻水进水温度</td>
                                            <td style="width: 25%"><span id="data-4" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <td>冷冻水出水温度</td>
                                            <td><span id="data-5" class="random-int">XXXXXX</span></td>
                                        </tr>
                                        <tr>
                                            <td>流量</td>
                                            <td><span id="data-6" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <th rowspan="3">冷凝器</th>
                                            <td>冷冻水进水温度</td>
                                            <td><span id="data-7" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <td>冷冻水出水温度</td>
                                            <td><span id="data-8" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <td>端差</td>
                                            <td><span id="data-9" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <th rowspan="4">COP</th>
                                            <td>设计COP</td>
                                            <td><span id="data-10" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <td>实际COP</td>
                                            <td><span id="data-11" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <td>标况COP</td>
                                            <td><span id="data-12" class="random-int">XXX</span></td>
                                        </tr>
                                        <tr>
                                            <td>衰减率</td>
                                            <td><span id="data-13" class="random-int">XXX</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-fuzai">
                            <div class="progress-cop3">
                                <div class="point"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-side">
                    <div class="current-date">
                    </div>
                    <div class="echart-wrap">
                        <h4>COP与负载率</h4>
                        <div class="echart" id="chart1">
                        </div>
                    </div>
                    <div class="echart-wrap">
                        <h4>冷冻水温度</h4>
                        <div class="echart" id="chart2">
                        </div>
                    </div>
                    <div class="echart-wrap">
                        <h4>冷却水温度</h4>
                        <div class="echart" id="chart3">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap.js"></script>
    <script src="bower_components/d3/d3.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/jquery-bridget/jquery.bridget.js"></script>
    <script src="bower_components/seiyria-bootstrap-slider/js/bootstrap-slider.js"></script>
    <script src="bower_components/bootstrap-switch/dist/js/bootstrap-switch.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:js({app,.tmp}) scripts/main.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->
    <script src="scripts/echarts.js"></script>
    <script type="text/javascript">
    (function($) {
        $(document).ready(function() {
            Date.prototype.pattern = function(fmt) {
                var o = {
                    "M+": this.getMonth() + 1, //月份         
                    "d+": this.getDate(), //日         
                    "h+": this.getHours() % 12 == 0 ? 12 : this.getHours() % 12, //小时         
                    "H+": this.getHours(), //小时         
                    "m+": this.getMinutes(), //分         
                    "s+": this.getSeconds(), //秒         
                    "q+": Math.floor((this.getMonth() + 3) / 3), //季度         
                    "S": this.getMilliseconds() //毫秒         
                };
                var week = {
                    "0": "/u65e5",
                    "1": "/u4e00",
                    "2": "/u4e8c",
                    "3": "/u4e09",
                    "4": "/u56db",
                    "5": "/u4e94",
                    "6": "/u516d"
                };
                if (/(y+)/.test(fmt)) {
                    fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
                }
                if (/(E+)/.test(fmt)) {
                    fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? "/u661f/u671f" : "/u5468") : "") + week[this.getDay() + ""]);
                }
                for (var k in o) {
                    if (new RegExp("(" + k + ")").test(fmt)) {
                        fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
                    }
                }
                return fmt;
            }

            $('.current-date').text(new Date().pattern("yyyy-MM-dd hh:mm"));


            var format = d3.format('.2f');
            var o = d3.scale.linear().domain([3.1, 6.6]).range([0, 671]);
            var o2 = d3.scale.linear().domain([0, 1]).range([308, 0]);

            function update() {
                var cop1 = Math.random() * 3.5 + 3.1;
                var cop2 = Math.random() * 3.5 + 3.1;
                var cop3 = Math.random() * 3.5 + 3.1;
                var fuzai1 = Math.random();

                $('.progress-cop2 .point-1').animate({
                    right: o(cop1) - 9
                });

                $('.progress-cop2 .point-2').animate({
                    right: o(cop2) - 9
                });

                $('.progress-cop2 .point-3').animate({
                    right: o(cop3) - 9
                });

                $('.progress-cop3 .point').animate({
                    right: o2(fuzai1) + 68
                });

                
                $('.random-text').text(['富豪宾馆', '中国石化', '特斯拉特斯拉特斯拉'][Math.floor(Math.random() * 3)]);

                $('#data-1').text(format(Math.random() * 30));
                $('#data-2').text(format(Math.random() * 30));
                $('#data-3').text(format(Math.random() * 30));
                $('#data-4').text(format(Math.random() * 30));
                $('#data-5').text(format(Math.random() * 30));
                $('#data-6').text(format(Math.random() * 30));
                $('#data-7').text(format(Math.random() * 30));
                $('#data-8').text(format(Math.random() * 30));
                $('#data-9').text(format(Math.random() * 30));
                $('#data-10').text(format(Math.random() * 30));
                $('#data-11').text(format(Math.random() * 30));
                $('#data-12').text(format(Math.random() * 30));
                $('#data-13').text(format(Math.random() * 30));

                chart1.addData([
                    [
                        0,
                        Math.random() * 7,
                        false,
                        false
                    ],
                    [
                        1,
                        Math.random(),
                        false,
                        false
                    ]
                ]);
				// option1.series[0].data = [Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7, Math.random() * 7];
				// chart1.setOption(option1);

                chart2.addData([
                    [
                        0,
                        Math.random() * 7,
                        false,
                        false
                    ],
                    [
                        1,
                        Math.random() * 7,
                        false,
                        false
                    ]
                ]);
                chart3.addData([
                    [
                        0,
                        Math.random() * 7,
                        false,
                        false
                    ],
                    [
                        1,
                        Math.random() * 7,
                        false,
                        false
                    ]
                ]);

                setTimeout(function() {
                    update()
                }, 3000);
            }



            var option1 = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['COP', '负载率']
                },
                calculable: true,
                xAxis: [{
                    type: 'category',
                    boundaryGap: false,
                    splitLine: false,
                    data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']
                }],
                yAxis: [{
                    type: 'value',
                    name: "COP"
                }, {
                    type: 'value',
                    name: '负载率',
                    axisLabel: {
                        formatter: function(value) {
                            // Function formatter
                            return value * 100 + '%';
                        }
                    }
                }],
                grid: {
                    x: 30,
                    y: 20,
                    x2: 50,
                    y2: 30
                },
                series: [{
                    name: 'COP',
                    type: 'line',
                    data: [3, 3, 4, 5, 6, 2, 1, 4, 7, 8, 4, 2]
                }, {
                    name: '负载率',
                    type: 'line',
                    data: [0.2, 0.3, 0.5, 0.6, 0.8, 0.9, 0.4, 0.6, 0.2, 0.3, 0.6, 0.1],
                    yAxisIndex: 1
                }]
            };

            var chart1 = echarts.init(document.getElementById('chart1'));
            chart1.setOption(option1);


            var option2 = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['进水', '出水']
                },
                calculable: true,
                xAxis: [{
                    type: 'category',
                    boundaryGap: false,
                    splitLine: false,
                    data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']
                }],
                yAxis: [{
                    type: 'value',
                    name: "温度"
                }],
                grid: {
                    x: 30,
                    y: 20,
                    x2: 10,
                    y2: 30
                },
                series: [{
                    name: '进水',
                    type: 'line',
                    data: [3, 3, 4, 5, 6, 2, 1, 4, 7, 8, 4, 2]
                }, {
                    name: '出水',
                    type: 'line',
                    data: [2, 3, 6, 4, 1, 2, 1, 4, 4, 3, 4, 3]
                }]
            };

            var chart2 = echarts.init(document.getElementById('chart2'));
            chart2.setOption(option2);

            var option3 = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['进水', '出水']
                },
                calculable: true,
                xAxis: [{
                    type: 'category',
                    boundaryGap: false,
                    splitLine: false,
                    data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']
                }],
                yAxis: [{
                    type: 'value',
                    name: "温度"
                }],
                grid: {
                    x: 30,
                    y: 20,
                    x2: 10,
                    y2: 30
                },
                series: [{
                    name: '进水',
                    type: 'line',
                    data: [3, 3, 4, 5, 6, 2, 1, 4, 7, 8, 4, 2]
                }, {
                    name: '出水',
                    type: 'line',
                    data: [2, 3, 6, 4, 1, 2, 1, 4, 4, 3, 4, 3]
                }]
            };

            var chart3 = echarts.init(document.getElementById('chart3'));
            chart3.setOption(option3);

            update();
        });
    })(jQuery);
    </script>
</body>

</html>
