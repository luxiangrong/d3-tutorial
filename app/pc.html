<!doctype html>
<html lang="zh-CN" class="pc">

<head>
    <meta charset="utf-8">
    <title>d3 tutorial</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="bower_components/seiyria-bootstrap-slider/dist/css/bootstrap-slider.css" />
    <link rel="stylesheet" href="bower_components/bootstrap-switch/dist/css/bootstrap3/bootstrap-switch.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
    <!-- build:js scripts/vendor/modernizr.js -->
    <script src="bower_components/modernizr/modernizr.js"></script>
    <!-- endbuild -->
</head>

<body>
    <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <div class="all-wrap">
        <header class="header">
            <div>
                <h1><img src="images/title01.png" height="29" width="312" alt=""></h1>
                <div class="header-wrap">
                    <img class="logo" src="images/logo02.png" height="109" width="247" alt="">
                    <h2>系统状态：运行中<i>/</i>室外温度：4 ℃<i>/</i>室内温度：27 ℃<i>/</i>冷冻水温度：7 ℃<i>/</i>冷却水温度18 ℃<i>/</i>系统功率：345 kW</h2>
                    <div class="tab">
                        <a class="data" href="#"><img src="images/pic01.png" alt=""></a>
                        <a class="" href="#"><img src="images/pic02.png" alt=""></a>
                    </div>
                    <div class="all-status">
                        轻度污染
                    </div>
                    <div class="date">
                        <div class="year"><span>2</span>
                            <span>0</span>
                            <span>1</span>
                            <span>5</span></div>
                        <div class="month"><span>0</span><span>3</span></div>
                        <div class="day"><span>2</span><span>6</span></div>
                    </div>
                    <div class="mode-slider-wrap">
                        <input type="text" id="mode-slider" />
                    </div>
                    <div class="switch switch-large switch-global">
                        <input id="switch" type="checkbox" checked />
                    </div>
                </div>
            </div>
        </header>
        <div class="col-left">
            <div class="blue-box">
                <div class="progress-bar-wrap">
                    <div id="progress-bar-year"></div>
                    <p class="plan">计划<span id="progress-bar-year-plan">151.5</span></p>
                    <p class="used">已用<span id="progress-bar-year-used">121.3</span></p>
                    <p class="deviation">偏离<span id="progress-bar-year-deviation">35%</span></p>
                    <label>年定额消耗</label>
                </div>
                <div class="progress-bar-wrap">
                    <div id="progress-bar-month"></div>
                    <p class="plan">计划<span id="progress-bar-month-plan">151.5</span></p>
                    <p class="used">已用<span id="progress-bar-month-used">121.3</span></p>
                    <p class="deviation">偏离<span id="progress-bar-month-deviation">35%</span></p>
                    <label>月定额消耗</label>
                </div>
            </div>
        </div>
        <div class="col-center">
            <div class="gray-box nenghao">
                <h1>能耗定额调节</h1>
                <div class="row">
                    <div class="col-256">
                        <div id="nenghao" class="progress-knoba-1"></div>
                        <p>能耗限定：<span id="nenghao-max">1345</span> Kwh</p>
                        <p>今日能耗：<span class="current-nenghao"><span id="nenbhao-current">45</span> Kwh</span>
                        </p>
                    </div>
                    <div class="col-256">
                        <div id="wendu" class="progress-knoba-2"></div>
                        <p>室温最高：<span id="wendu-max">28</span> ℃</p>
                        <p>实时室温：<span class="current-wendu"><span id="wendu-current">27</span> ℃</span>
                        </p>
                    </div>
                    <div class="col-422">
                        <div class="speed-gauge-wrap">
                            <div class="row small-gauge">
                                <div class="col-xs-4">
                                    <div id="simple-gauge-1" class="gauge"></div>
                                    <p>冷机COP <span id="lengjicop">4.5</span></p>
                                </div>
                                <div class="col-xs-4">
                                    <div id="simple-gauge-2" class="gauge"></div>
                                    <p>节能率 <span id="jienenglv">34.5</span>%</p>
                                </div>
                                <div class="col-xs-4">
                                    <div id="simple-gauge-3" class="gauge"></div>
                                    <p>节能量 <span id="jienengliang">5.7</span>kw</p>
                                </div>
                            </div>
                            <div id="speed-gauge">
                            </div>
                            <div class="speed-gauge-label">
                                <img src="images/gauge02.png" height="49" width="283" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-slider">
                    <input type="text" id="nenghao-slider" />
                </div>
                <div class="btngroup">
                    <div>
                        <button class="btn btn-link btn-a">确定</button>
                    </div>
                </div>
            </div>
            <div class="gray-box jiankong">
                <h1>冷站系统实时监控</h1>
                <div class="body row">
                    <div class="col-left">
                        <div class="chart-status">
                            <img src="images/pic03.png" alt="">
                            <i class="status status-warning status-1"></i>
                            <i class="status status-running status-2"></i>
                            <i class="status status-stopping status-3"></i>
                            <i class="status status-running status-4"></i>
                            <i class="status status-warning status-5"></i>
                            <i class="status status-stopping status-6"></i>
                            <i class="status status-running status-7"></i>
                            <i class="status status-stopping status-8"></i>
                        </div>
                        <div class="system-status">
                            <i class="status status-warning"></i>
                            <i class="status status-running"></i>
                            <i class="status status-stopping"></i> 报警/运行/停止
                        </div>
                        <div class="shuiwei-status clearfix">
                            <ul>
                                <li>冷冻水供水温度：7 ℃</li>
                                <li>冷冻水回水温度：12 ℃</li>
                                <li>冷却水供水温度：26 ℃</li>
                                <li>冷却水回水温度：26 ℃</li>
                            </ul>
                        </div>
                        <div class="btngroup">
                            <button class="btn btn-link btn-a">
                                自由编组
                            </button>
                        </div>
                    </div>
                    <div class="col-right">
                        <div class="log-info">
                            <div class="head">
                                <h2>实时信息</h2>
                            </div>
                            <div class="body">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th style="width: 25%">时间</th>
                                            <th>事件</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>08:00</th>
                                            <td>1号冷机启动</td>
                                        </tr>
                                        <tr>
                                            <th>08:00</th>
                                            <td>1号冷机启动</td>
                                        </tr>
                                        <tr>
                                            <th>08:00</th>
                                            <td>1号冷机启动</td>
                                        </tr>
                                        <tr>
                                            <th>08:00</th>
                                            <td>1号冷机启动</td>
                                        </tr>
                                        <tr>
                                            <th>08:00</th>
                                            <td>1号冷机启动</td>
                                        </tr>
                                        <tr>
                                            <th>08:00</th>
                                            <td>1号冷机启动</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-right">
            <div class="row">
                <div class="gray-box tongji">
                    <h1>能耗统计</h1>
                    <h2>节能效益：耗电量25.6万度，<span class="grade-a">节省18.2元</span></h2>
                    <div class="bar-wrap">
                        <div class="histogram-wrap" id="histogram1"></div>
                        <div class="histogram-wrap" id="histogram2"></div>
                        <div class="histogram-wrap" id="histogram3"></div>
                    </div>
                </div>
                <div class="youhua-wrap">
                    <div class="youhua">
                        <div id="progress-youhua"></div>
                    </div>
                    <p>系统评级：<span class="grade-a">优</span></p>
                    <p>系统COP：<span class="grade-a">6.7</span></p>
                </div>
            </div>
            <div class="row">
                <div class="blue-box kongzhi">
                    <h1>设备控制预览</h1>
                    <div class="body">
                        <div class="shebeikongzhi-wrap">
                            <div id="shebeikongzhi"></div>
                        </div>
                        <div class="info">
                            <div id="progressBall"></div>
                            <h4>25 ℃<small>125kw</small></h4>
                        </div>
                        <ul class="description">
                            <li><i class="cube cube-a"></i>故障</li>
                            <li><i class="cube cube-b"></i>停机</li>
                            <li><i class="cube cube-c"></i>运行</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap-sass/assets/javascripts/bootstrap.js"></script>
    <script src="bower_components/d3/d3.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/jquery-bridget/jquery.bridget.js"></script>
    <script src="bower_components/seiyria-bootstrap-slider/js/bootstrap-slider.js"></script>
    <script src="bower_components/bootstrap-switch/dist/js/bootstrap-switch.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:js({app,.tmp}) scripts/main.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->
    <script type="text/javascript">
    (function($) {
        $(document).ready(function() {
            $('#switch').bootstrapSwitch();

            var currentTime = new Date();
            var year = currentTime.getFullYear();
            var month = currentTime.getMonth() + 1;
            month = month > 10 ? month : '0' + month;
            var day = currentTime.getDate();
            day = day > 10 ? day : '0' + day;
            $('.date .year').html('<span>' + currentTime.getFullYear().toString().split('').join('</span><span>') + '</span>');
            $('.date .month').html('<span>' + month.toString().split('').join('</span><span>') + '</span>');
            $('.date .day').html('<span>' + day.toString().split('').join('</span><span>') + '</span>');

            var format = d3.format('.1f');
            var format2 = d3.format('.f');

            $("#nenghao-slider").slider({
                min: 0,
                max: 100,
                value: 0,
                ticks: [0, 50, 100],
                ticks_labels: [0, 50, 100]
            });

            function setSlideValue() {
                var value = slideSwitch.getValue();
                if(value < 60) {
                    slideSwitch.setValue(0);
                }
                if( value >= 60 && value < 140) {
                   slideSwitch.setValue(100);
                }
                if(value >= 140) {
                    slideSwitch.setValue(200);
                }
            }
            var slideSwitch = $("#mode-slider").slider({
                min: 0,
                max: 200,
                value: 0,
                ticks: [0, 100, 200],
                ticks_labels: ['自动', '半自动', '手动'],
                tooltip: 'hide'
            }).on('slideStop', setSlideValue).data('slider');

            var progressBtn = myChart.progressBtn('#progress-youhua', {
                click: function() {
                    progressBtn.update(format(Math.random() * 10));
                }
            });

            var winWidth = $(window).width();


            var progressBarMonth = myChart.progressBar('#progress-bar-month', {
                width: 60,
                height: 331,
                max: 151.5,
                itemSize: 8,
                direction: 'horizontal',
                padding: {
                    top: 10,
                    left: 10,
                    right: 10,
                    bottom: 10
                },
                update: function(data) {
                    $("#progress-bar-month-plan").text(data.max);
                    $("#progress-bar-month-used").text(data.progress);
                    $("#progress-bar-month-deviation").text(d3.round((data.max - data.progress) / data.max * 100, 0) + "%");
                }
            })

            var progressBarYear = myChart.progressBar('#progress-bar-year', {
                width: 60,
                height: 331,
                max: 151.5,
                itemSize: 8,
                direction: 'horizontal',
                padding: {
                    top: 10,
                    left: 10,
                    right: 10,
                    bottom: 10
                },
                update: function(data) {
                    $("#progress-bar-year-plan").text(data.max);
                    $("#progress-bar-year-used").text(data.progress);
                    $("#progress-bar-year-deviation").text(d3.round((data.max - data.progress) / data.max * 100, 0) + "%");
                }
            })

            var progressKnoba1 = myChart.progressKnob('#nenghao', {
                max: 1345,
                update: function(data) {
                    $("#nenghao-max").text(data.max);
                    $("#nenbhao-current").text(data.progress);
                }
            });
            var progressKnoba2 = myChart.progressKnob('#wendu', {
                max: 28,
                update: function(data) {
                    $("#wendu-max").text(data.max);
                    $("#wendu-current").text(data.progress);
                }
            });

            var speedGauge1 = myChart.speedGauge('#speed-gauge', {
                width: 230,
                height: 230,
            });

            var lollipopPie = myChart.lollipopPie('#shebeikongzhi', {});

            var progressBall = myChart.progressBall('#progressBall', {});

            var smallGauge1 = myChart.smallGauge('#simple-gauge-1', {
                width: 78,
                height: 78,
                min: 0, //最小刻度
                max: 7, //最大刻度
                tick: {
                    startDeg: 150, //刻度起始角度
                    endDeg: 390, //刻度结束角度
                    direction: 1, //刻度方向，1为顺时针，-1为逆时针
                    major: 6, //主要刻度数量
                    minor: 10, //主要刻度之间的次要刻度数量
                },
                unitLabel: { //计量单位标签
                    title: 'W/W', // 标题
                    pos: 'north' // 位置 north:上半部分， south:下半部分
                },
                update: function(data) {
                    $("#lengjicop").text(data.value);
                }
            });

            var smallGauge2 = myChart.smallGauge('#simple-gauge-2', {
                width: 78,
                height: 78,
                min: 0, //最小刻度
                max: 35, //最大刻度
                tick: {
                    startDeg: 150, //刻度起始角度
                    endDeg: 390, //刻度结束角度
                    direction: 1, //刻度方向，1为顺时针，-1为逆时针
                    major: 6, //主要刻度数量
                    minor: 10, //主要刻度之间的次要刻度数量
                },
                unitLabel: { //计量单位标签
                    title: 'W/W', // 标题
                    pos: 'north' // 位置 north:上半部分， south:下半部分
                },
                update: function(data) {
                    $("#jienenglv").text(data.value);
                }
            });

            var smallGauge3 = myChart.smallGauge('#simple-gauge-3', {
                width: 78,
                height: 78,
                min: 0, //最小刻度
                max: 35, //最大刻度
                tick: {
                    startDeg: 150, //刻度起始角度
                    endDeg: 390, //刻度结束角度
                    direction: 1, //刻度方向，1为顺时针，-1为逆时针
                    major: 6, //主要刻度数量
                    minor: 10, //主要刻度之间的次要刻度数量
                },
                unitLabel: { //计量单位标签
                    title: 'W/W', // 标题
                    pos: 'north' // 位置 north:上半部分， south:下半部分
                },
                update: function(data) {
                    $("#jienengliang").text(data.value);
                }
            });

            var histogram1 = myChart.histogram('#histogram1', {
                legend0: {
                    color: '#00a8ff',
                    label: '定额总量'
                },
                legend1: {
                    color: '#30dca8',
                    label: '预计总量'
                }
            });

            histogram1.init([{
                label: '万度/日',
                values: [(Math.random() * 1.5), (Math.random() * 1.5) + (Math.random() * 1.5)]
            }, {
                label: '万度/月',
                values: [(Math.random() * 2.5), (Math.random() * 2.5) + (Math.random() * 2.5)]
            }, {
                label: '万度/年',
                values: [(Math.random() * 3.5), (Math.random() * 3.5) + (Math.random() * 3.5)]
            }]);

            var histogram2 = myChart.histogram('#histogram2', {
                legend0: {
                    color: '#00a8ff',
                    label: '预计电量'
                },
                legend1: {
                    color: '#30dca8',
                    label: '实际电量'
                }
            });
            histogram2.init([{
                label: '万度/日',
                values: [2.5, 3.2]
            }, {
                label: '万度/月',
                values: [3.5, 5.2]
            }, {
                label: '万度/年',
                values: [4.5, 6.2]
            }]);

            var histogram3 = myChart.histogram('#histogram3', {
                legend0: {
                    color: '#00a8ff',
                    label: '节电费'
                },
                legend1: {
                    color: '#30dca8',
                    label: '耗电费'
                }
            });
            histogram3.init([{
                label: '万元/日',
                values: [4.5, 6.2]
            }, {
                label: '万元/月',
                values: [12.5, 13.2]
            }, {
                label: '万元/年',
                values: [14.5, 16.2]
            }]);


            function update() {
                //模拟今日能耗
                progressKnoba1.update(Math.floor(Math.random() * 1345));
                //模拟当前温度
                progressKnoba2.update(Math.floor(Math.random() * 28));

                //模拟年定额消耗
                progressBarMonth.update(format(Math.random() * 151.5));
                //模拟月定额消耗
                progressBarYear.update(format(Math.random() * 151.5));

                speedGauge1.update(format(Math.random() * 300));
                lollipopPie.update([{
                    label: '#1',
                    data: [{
                        label: '运行',
                        value: Math.random() * 24
                    }, {
                        label: '故障',
                        value: Math.random() * 24
                    }, {
                        label: '停机',
                        value: Math.random() * 24
                    }]
                }, {
                    label: '#2',
                    data: [{
                        label: '运行',
                        value: Math.random() * 24
                    }, {
                        label: '故障',
                        value: Math.random() * 24
                    }, {
                        label: '停机',
                        value: Math.random() * 24
                    }]
                }, {
                    label: '#3',
                    data: [{
                        label: '运行',
                        value: Math.random() * 24
                    }, {
                        label: '故障',
                        value: Math.random() * 24
                    }, {
                        label: '停机',
                        value: Math.random() * 24
                    }, {
                        label: '运行',
                        value: Math.random() * 24
                    }, {
                        label: '故障',
                        value: Math.random() * 24
                    }, {
                        label: '停机',
                        value: Math.random() * 24
                    }]
                }, {
                    label: '#4',
                    data: [{
                        label: '运行',
                        value: Math.random() * 24
                    }, {
                        label: '故障',
                        value: Math.random() * 24
                    }, {
                        label: '停机',
                        value: Math.random() * 24
                    }]
                }, {
                    label: '#5',
                    data: [{
                        label: '运行',
                        value: Math.random() * 24
                    }, {
                        label: '故障',
                        value: Math.random() * 24
                    }, {
                        label: '停机',
                        value: Math.random() * 24
                    }]
                }]);
                progressBall.update(format(Math.random()));

                smallGauge1.update(format(Math.random() * 7));
                smallGauge2.update(format(Math.random() * 35));
                smallGauge3.update(format(Math.random() * 35));

                //模拟状态变化
                $('.chart-status i.status').toggleClass('status-warning status-stopping status-running');


                histogram1.update([{
                    label: '万度/日',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }, {
                    label: '万度/月',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }, {
                    label: '万度/年',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }]);

                histogram2.update([{
                    label: '万度/日',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }, {
                    label: '万度/月',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }, {
                    label: '万度/年',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }]);

                histogram3.update([{
                    label: '万元/日',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }, {
                    label: '万元/月',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }, {
                    label: '万元/年',
                    values: [Number(format(Math.random() * 3)), Number(format(Math.random() * 3)) + Number(format(Math.random() * 3))]
                }]);

                setTimeout(function() {
                    update()
                }, 3000);


            }
            update();






        });
    })(jQuery);
    </script>
</body>

</html>
